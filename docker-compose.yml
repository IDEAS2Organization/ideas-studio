version: "3.5"
services:

  nginx:
    image: docker4ideas/ideas_nginx
    ports:
      - "8081:8081"

  ideas-studio-develop:
    image: docker4ideas/ideas-studio:develop
    # command: bash -c "tail -f /dev/null"
    command: bash -c "cd /ideas/studio && mvn spring-boot:run"
    ports:
      - "8080:8080"
    volumes: 
      - .:/ideas/studio
      - temporal-data:/tmp # Necesario para el m√≥dulo de latex
  
  ideas-latex-language:
    image: docker4ideas/latex-module:develop
    # command: bash -c "tail -f /dev/null"
    command: bash -c "cd /ideas/latex-module && mvn spring-boot:run"
    volumes:
      - ../ideas-latex-module:/ideas/latex-module
      - temporal-data:/tmp
  
  ideas-dockerfile-language:
    image: docker4ideas/module:develop
    # command: bash -c "tail -f /dev/null"
    command: bash -c "cd /ideas/dockerfile-module && mvn spring-boot:run"
    volumes:
      - ../ideas-dockerfile-module/:/ideas/dockerfile-module
  
  ideas-plaintext-language:
    image: tomcat:9.0.16-jre8
    command: bash -c "cp /target/ideas-plaintext-language-0.7.war /usr/local/tomcat/webapps/ideas-plaintext-language.war && /usr/local/tomcat/bin/catalina.sh run"
    volumes:
      - ../ideas-plaintext-module/target:/target

volumes:
  temporal-data:
